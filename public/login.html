<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autenticación - CBTIS051</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <main class="body-auth">
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <div class="auth-logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h1 class="auth-title" id="authTitle">Iniciar Sesión</h1>
                <p class="auth-subtitle" id="authSubtitle">Sistema de Gestión de Documentos CBTIS051</p>
            </div>

            <div id="alertContainer"></div>

            <!-- Formulario de Login -->
            <form id="loginForm" class="auth-form">
                <div class="form-group">
                    <label for="loginUsuario" class="form-label">Usuario o Correo</label>
                    <input type="text" id="loginUsuario" class="form-input" placeholder="Ingresa tu usuario o correo" required>
                </div>

                <div class="form-group">
                    <label for="loginPassword" class="form-label">Contraseña</label>
                    <div class="input-wrapper">
                        <input type="password" id="loginPassword" class="form-input" placeholder="Ingresa tu contraseña" required>
                        <i class="fas fa-eye password-toggle" id="toggleLoginPassword"></i>
                    </div>
                </div>

                <button type="submit" class="btn-primary" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                </button>

                <p class="reset-subtitle-2">
                    Recuerda que al cambiar de administrador, debes cambiar tu contraseña, justo aqui abajo.
                </p>

                <!-- CORRECCIÓN: Enlace directo a la página de recuperación -->
                <div class="forgot-password-link">
                    <a href="forgot-password-step1.html">
                        <i class="fas fa-key"></i> ¿Olvidaste tu contraseña?
                    </a>
                </div>
                
                <div class="auth-link" id="registerLinkContainer" style="margin-top: 10px; text-align: center; display: none;">
                    <span style="color: #718096;">¿Primera vez? </span>
                    <a href="#" id="showRegisterFromLogin" style="font-weight: 600;">Registrar administrador</a>
                </div>
            </form>

            <!-- Formulario de Registro -->
            <form id="registerForm" class="auth-form hidden">
                <div class="form-group">
                    <label for="registerUsuario" class="form-label">Usuario</label>
                    <input type="text" id="registerUsuario" class="form-input" placeholder="Elige un nombre de usuario" minlength="3">
                </div>

                <div class="form-group">
                    <label for="registerCorreo" class="form-label">Correo Electrónico</label>
                    <input type="email" id="registerCorreo" class="form-input" placeholder="tu@correo.com">
                </div>

                <div class="form-group">
                    <label for="registerPassword" class="form-label">Contraseña</label>
                    <div class="input-wrapper">
                        <input type="password" id="registerPassword" class="form-input" placeholder="Mínimo 6 caracteres" minlength="6">
                        <i class="fas fa-eye password-toggle" id="toggleRegisterPassword"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label for="registerPasswordConfirm" class="form-label">Confirmar Contraseña</label>
                    <div class="input-wrapper">
                        <input type="password" id="registerPasswordConfirm" class="form-input" placeholder="Repite tu contraseña" minlength="6">
                        <i class="fas fa-eye password-toggle" id="toggleRegisterPasswordConfirm"></i>
                    </div>
                </div>

                <button type="submit" class="btn-primary" id="registerBtn">
                    <i class="fas fa-user-plus"></i> Registrar Administrador
                </button>
            </form>

            <!-- CORRECCIÓN: Eliminado el formulario de recuperación interno -->
            <!-- Ya no es necesario porque redirigimos a otra página -->

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p style="margin-top: 15px; color: #667eea;">Procesando...</p>
            </div>
        </div>
    </div>
</main>
    <script type="module" src="/src/frontend/auth.js"></script>
</body>
</html>